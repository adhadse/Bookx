<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <menu id="primary_menu">
    <section>
      <item>
        <attribute name="label" translatable="yes">_Preferences</attribute>
        <attribute name="action">app.preferences</attribute>
      </item>
      <item>
        <attribute name="label" translatable="yes">_Keyboard Shortcuts</attribute>
        <attribute name="action">win.show-help</attribute>
      </item>
      <item>
        <attribute name="label" translatable="yes">_About Bookx</attribute>
        <attribute name="action">app.about</attribute>
      </item>
    </section>
  </menu>

  <template class="BookxWindow" parent="AdwApplicationWindow">
    <!-- TODO: Info button Adwflap-->
    <property name="content">
    <object class="GtkBox">
      <property name="orientation">vertical</property>
      <child>
        <object class="AdwHeaderBar" id="headerbar">
          <!-- Bch, Book Read, and Edit Button -->
          <child>
            <object class="GtkButton" id="back_button">
              <property name="action_name">win.go-back</property>
              <property name="icon_name">go-previous-symbolic</property>
            </object>
          </child>
          <child>
            <object class="GtkRevealer" id="book_read_button_revealer">
              <property name="transition_type">crossfade</property>
              <child>
                <object class="GtkToggleButton" id="book_read_button">
                  <property name="icon_name">accessories-dictionary-symbolic</property>
                  <property name="tooltip-text" translatable="yes">Read Book</property>
                </object>
              </child>
            </object>
          </child>
          <child>
            <object class="GtkRevealer" id="book_edit_button_revealer">
              <property name="transition_type">crossfade</property>
              <child>
                <object class="GtkToggleButton" id="book_edit_button">
                  <property name="icon_name">document-edit-symbolic</property>
                  <property name="tooltip-text" translatable="yes">Edit Book</property>
                </object>
              </child>
            </object>
          </child>

          <!-- Search bar, book info, and menu button -->
          <!-- Application Menu Button -->
          <child type="end">
            <object class="GtkMenuButton" id="appmenu_button">
              <property name="icon-name">open-menu-symbolic</property>
              <property name="menu-model">primary_menu</property>
            </object>
          </child>
          <!-- Expandable Search bar -->
          <child type="end">
            <object class="GtkStack" id="search_stack">
              <property name="transition_type">slide-right</property>
              <property name="transition-duration">300</property>
              <property name="visible-child">search_button</property> <!-- change this to search_bar-->
              <property name="halign">start</property>
              <child>
                <object class="GtkSearchBar" id="search_bar">
                  <property name="visible">false</property>           <!-- change this to true -->
                  <property name="search_mode_enabled">true</property>
                  <child>
                    <object class="GtkSearchEntry" id="search_entry">
                    </object>
                  </child>
                </object>
              </child>
              <child>
                <object class="GtkToggleButton" id="search_button">
                  <property name="icon_name">edit-find-symbolic</property>
                  <property name="halign">end</property>
                  <property name="hexpand">false</property>
                  <property name="tooltip-text" translatable="yes">Search</property>
                </object>
              </child>
            </object>
          </child>
          <!-- Book Info reveal button -->
          <child type="end">
            <object class="GtkRevealer" id="search_revealer">
              <property name="transition_type">crossfade</property>
              <property name="reveal-child">true</property>
              <child>
                <object class="GtkToggleButton" id="book_info_button">
                  <property name="icon_name">info-symbolic</property>
                  <property name="tooltip-text" translatable="yes">Book Info</property>
                  <property name="active" bind-source="book_info_flap"
                        bind-property="reveal-flap"
                        bind-flags="bidirectional"/>
                </object>
              </child>
            </object>
          </child>
        </object>
      </child>

      <!-- Content Box with AdwFlap for Book Info -->
      <child>
        <object class="AdwFlap" id="book_info_flap">
          <property name="reveal-flap">false</property>
          <property name="flap-position">end</property>
          <property name="swipe-to-open">true</property>
          <property name="swipe-to-close">true</property>
          <property name="transition-type">over</property>
          <property name="content">
            <object class="GtkLabel" id="content">
              <property name="label" translatable="yes">Content</property>
              <style>
                <class name="title-header"/>
              </style>
            </object>
          </property>
          <property name="flap">
            <object class="GtkLabel" id="info_flap">
              <property name="label" translatable="yes">Flap</property>
              <style><class name="title-header"/></style>
              <style><class name="background"/></style>
            </object>
          </property>
        </object>
      </child>

    </object>
    </property>
  </template>
</interface>
